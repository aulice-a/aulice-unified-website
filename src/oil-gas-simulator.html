---
layout: base.html
title: Oil & Gas Professional Simulator
permalink: /oil-gas-simulator/
---

<div class="bg-gray-100 flex flex-col items-center min-h-screen">
    <header class="fixed top-0 left-0 right-0 z-50 bg-white shadow-lg py-4 px-8 flex justify-between items-center">
        <nav class="flex space-x-6 text-gray-700 font-medium">
            <a href="https://www.aulice.ca/" target="_blank" class="hover:text-gray-800 transition-colors duration-200">Gate</a>
            <a href="https://aulice-about.netlify.app/" target="_blank" class="hover:text-gray-800 transition-colors duration-200">About us</a>
            <a href="https://aulice-pricing-plans.netlify.app/" target="_blank" class="hover:text-gray-800 transition-colors duration-200">Pricing Plans</a>
            <a href="https://aulice-lexicon.netlify.app/" target="_blank" class="hover:text-gray-800 transition-colors duration-200">Lexicon</a>
            <a href="https://aulice-teacher-dashboard.netlify.app/" target="_blank" class="hover:text-gray-800 transition-colors duration-200">Teacher</a>
            <a href="https://aulice-contact.netlify.app/" target="_blank" class="hover:text-gray-800 transition-colors duration-200">Contact</a>
        </nav>
        <button id="share-btn" class="text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-colors" style="background-color: var(--course-primary-color);">
            Share
        </button>
    </header>

    <div class="oil-gas-course container mx-auto p-8 bg-white shadow-2xl rounded-2xl border border-gray-200 mt-20">
        <div id="game-container">
            <header class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800">Oil & Gas Professional Simulator</h1>
                <p class="text-lg text-gray-500 mt-2">Navigate the complex world of energy, from safety to sustainability.</p>
            </header>

            <main class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-inner flex flex-col justify-between">
                    <div>
                        <h2 class="text-2xl font-semibold text-gray-700 mb-4">Situation <span id="situation-number">1</span>/10</h2>
                        <div class="scrollable-content">
                            <p id="situation-text" class="text-gray-600 leading-relaxed text-base fade-in">
                                </p>
                        </div>
                    </div>
                    <div class="mt-6 text-center">
                        <p class="text-2xl font-extrabold" style="color: var(--course-primary-color);">Score: <span id="score">100</span></p>
                        <p id="score-change-indicator" class="text-sm font-semibold mt-1 opacity-0 score-change">
                            </p>
                    </div>
                </div>

                <div class="flex flex-col">
                    <div class="grid grid-cols-1 gap-4 mb-6">
                        <button class="option-btn text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-colors transform hover:scale-105 duration-200" style="background-color: var(--course-primary-color);" data-option-index="0">Option 1</button>
                        <button class="option-btn text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-colors transform hover:scale-105 duration-200" style="background-color: var(--course-primary-color);" data-option-index="1">Option 2</button>
                        <button class="option-btn text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-colors transform hover:scale-105 duration-200" style="background-color: var(--course-primary-color);" data-option-index="2">Option 3</button>
                        <button class="option-btn text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-colors transform hover:scale-105 duration-200" style="background-color: var(--course-primary-color);" data-option-index="3">Option 4</button>
                    </div>
                    
                    <div id="outcome-container" class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-inner hidden fade-in">
                        <h3 class="text-xl font-semibold text-gray-700 mb-2">Outcome:</h3>
                        <p id="outcome-text" class="text-gray-600 leading-relaxed text-base">
                            </p>
                    </div>

                    <div id="final-buttons" class="flex flex-col md:flex-row gap-4 mt-6">
                        <button id="next-situation-btn" class="flex-1 bg-green-500 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-green-600 transition-colors transform hover:scale-105 duration-200 hidden">Next Situation</button>
                    </div>
                </div>
            </main>
        </div>

        <div id="shared-score-container" class="text-center p-8 hidden">
            <h2 class="text-5xl font-extrabold text-gray-800 mb-4">Oil & Gas Professional Simulator</h2>
            <p class="text-2xl font-medium text-gray-600 mb-2">Someone wants to share their score with you!</p>
            <p class="text-7xl font-black mt-8 mb-8" style="color: var(--course-primary-color);">Score: <span id="shared-score"></span></p>
            <p class="text-lg text-gray-500 max-w-md mx-auto mb-8">This is the final score they achieved. Are you ready to beat it?</p>
            <button id="play-now-btn" class="text-white font-semibold py-3 px-8 rounded-full shadow-lg transition-colors transform hover:scale-105 duration-200" style="background-color: var(--course-primary-color);">Play Now!</button>
        </div>

        <div id="message-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full text-center">
                <h3 class="text-xl font-bold text-gray-800 mb-4">Link Copied!</h3>
                <p class="text-gray-600 mb-6">The shareable link has been copied to your clipboard. Share it with your friends!</p>
                <button id="close-modal-btn" class="text-white font-semibold py-2 px-6 rounded-lg transition-colors" style="background-color: var(--course-primary-color);">Close</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Utility function to shuffle an array (Fisher-Yates)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            const situations = [
                {
                    title: "The Geologic Uncertainty",
                    situation: "Your team has identified a promising new offshore oil field, but seismic data is inconclusive about a key fault line. The project is already over budget and facing investor pressure to move forward. Drilling without further investigation could save millions in the short term, but risks a catastrophic well blowout.",
                    options: [
                        { text: "Recommend a high-resolution seismic survey, delaying the project but ensuring a detailed understanding of the geology.", outcome: "You prioritize safety and risk mitigation. While this decision delays production and adds to the budget, it prevents a potential disaster that would cost lives, cause environmental damage, and lead to massive financial losses. A responsible and correct engineering decision.", scoreChange: +35 },
                        { text: "Begin drilling immediately, using a reduced safety protocol to save time and money.", outcome: "You gamble with lives and the environment. The well hits the unknown fault line, causing a major blowout. The resulting oil spill contaminates the ocean, leads to multiple fatalities, and bankrupts the company. A catastrophic and reckless choice.", scoreChange: -50 },
                        { text: "Suggest drilling a shallower, less risky well to satisfy investors while you secretly plan for a more detailed survey later.", outcome: "This half-measure is dishonest and ineffective. The investors' pressure remains, and your team is put at risk by the half-baked plan. Your deception is discovered, and you lose the trust of your team and management. A dishonest and failing strategy.", scoreChange: -20 },
                        { text: "Outsource the project to a third party to shift the risk.", outcome: "You delegate the responsibility but not the risk. The third party may be less familiar with the area and more likely to make a mistake. When a problem occurs, your company is still liable for the environmental and financial fallout. A naive and risky choice.", scoreChange: -15 }
                    ]
                },
                {
                    title: "The Environmental Compliance vs. Production Dilemma",
                    situation: "A new environmental regulation is introduced that requires a significant investment in a new water treatment system. Your current system is already compliant with the old regulations, but the new one would reduce your site's environmental impact by 90%. Your leadership is pushing to delay the investment to meet production targets.",
                    options: [
                        { text: "Advocate for the immediate installation of the new treatment system, highlighting the long-term benefits of improved environmental stewardship and public relations.", outcome: "You prioritize long-term sustainability and brand reputation. By investing in the new system, you position the company as a leader in environmental responsibility, building trust with the public and preventing future fines. A strategic and ethical choice.", scoreChange: +30 },
                        { text: "Delay the installation as your leadership suggests, hoping the regulation won't be strictly enforced.", outcome: "The regulation is strictly enforced, and you are hit with a massive fine and a public relations crisis. The cost of the fine and the damage to your reputation far exceed the cost of the original investment. A shortsighted and costly mistake.", scoreChange: -40 },
                        { text: "Install the new system, but cut corners on the construction to reduce the cost.", outcome: "The system is built improperly and fails, leading to a major leak. You are fined for the leak and still have to pay for a proper installation. An ineffective and irresponsible decision.", scoreChange: -25 },
                        { text: "Create a falsified report stating that your current system meets the new regulations.", outcome: "This is a criminal act. When the fraud is discovered, you will face legal charges, and the company will suffer immense financial and reputational damage. A catastrophic and illegal choice.", scoreChange: -50 }
                    ]
                },
                {
                    title: "The Community Relations Conflict",
                    situation: "A local community near your shale gas site is complaining about noise and traffic from your operations. You are fully compliant with all local ordinances, but the complaints are persistent. The local council is now considering implementing a new, more restrictive ordinance that would significantly increase your operational costs.",
                    options: [
                        { text: "Hold a public meeting to address their concerns, and offer to fund noise-reduction measures and a community traffic study.", outcome: "You show that you listen and care about the community. By engaging in dialogue and offering solutions, you build goodwill and prevent a costly and restrictive new ordinance. A thoughtful and proactive approach.", scoreChange: +25 },
                        { text: "Inform the community that you are already compliant with all regulations and cannot do more.", outcome: "Your response is seen as dismissive and arrogant. The community escalates their protest, leading to negative media coverage and a costly new ordinance. A rigid and shortsighted decision.", scoreChange: -30 },
                        { text: "Offer the community a financial donation to a local fund to buy their silence.", outcome: "The community views this as an attempt to buy them off. The offer is rejected, and the protests intensify. Your company's reputation is severely damaged. An insulting and ineffective solution.", scoreChange: -20 },
                        { text: "Temporarily halt operations to reduce the noise, but do not make any long-term changes.", outcome: "You stop operations, causing a major loss in production and revenue. The noise issue returns as soon as you restart, and the community has lost all faith in your word. A costly and temporary fix.", scoreChange: -25 }
                    ]
                },
                {
                    title: "Managing an Aging Workforce",
                    situation: "Your offshore rig has a highly experienced but aging workforce. Several recent near-misses have been attributed to physical fatigue and slow reaction times. Your supervisor wants to cut costs by extending shifts, while the safety manager is advocating for more frequent rest periods and a phased retirement program.",
                    options: [
                        { text: "Support the safety manager's recommendations, presenting a long-term plan for worker wellness and succession planning.", outcome: "You prioritize the health of your workforce and the long-term viability of the company. By preventing accidents and planning for a smooth transition, you avoid costly incidents and maintain a skilled labor pool. A strategic and responsible choice.", scoreChange: +30 },
                        { text: "Extend the shifts as your supervisor suggests, ignoring the safety manager's concerns.", outcome: "The longer shifts lead to a major incident caused by fatigue. An evacuation is necessary, and several workers are seriously injured. Production is halted, and your company faces a costly investigation and lawsuit. A reckless and irresponsible decision.", scoreChange: -50 },
                        { text: "Attempt a compromise by extending shifts but only for the younger workers.", outcome: "You create a two-tiered system that causes resentment and friction on the rig. The younger workers feel exploited, and the older workers feel they are not being managed properly. A poor leadership choice.", scoreChange: -15 },
                        { text: "Tell the supervisor to hire new, younger workers and fire the older ones.", outcome: "This is a cruel and illegal action that would lead to a major lawsuit for age discrimination. An unethical and illegal choice.", scoreChange: -40 }
                    ]
                },
                {
                    title: "The Financial Incentive vs. Ethical Duty",
                    situation: "A potential client offers a lucrative contract if you can provide a report that 'optimistically' estimates the reserves of a field. You know the true, more conservative estimate is much lower, which would likely lead them to pull out of the deal.",
                    options: [
                        { text: "Present a truthful and accurate report, even if it means losing the contract.", outcome: "You uphold your professional ethics and integrity. While you lose a lucrative short-term deal, you maintain your reputation as a reliable and trustworthy expert, which is more valuable in the long run. A sound and ethical decision.", scoreChange: +35 },
                        { text: "Provide the optimistic report to secure the contract.", outcome: "You compromise your professional ethics for a financial gain. When the client discovers the true reserves, they will sue for fraud and deception. You lose your license, and your reputation is ruined. A dishonest and self-destructive choice.", scoreChange: -50 },
                        { text: "Delay the report and hope the client forgets about the project.", outcome: "You appear disorganized and unreliable. The client will lose faith in your company and will not work with you again. A timid and unhelpful response.", scoreChange: -10 },
                        { text: "Include a disclaimer in the report that the numbers are speculative.", outcome: "This is a half-hearted attempt to be ethical. The client will still feel deceived when the numbers do not pan out, and you still may be liable for the misleading data. An insufficient and risky choice.", scoreChange: -20 }
                    ]
                },
                {
                    title: "Responding to a Public Relations Crisis",
                    situation: "A minor spill from a truck on the way to a processing plant has been captured by a local resident and posted on social media. The image is going viral, and the public is accusing your company of a major environmental disaster, even though the spill was quickly contained.",
                    options: [
                        { text: "Immediately issue a transparent and factual press release, explaining what happened and outlining your containment and cleanup efforts.", outcome: "You take control of the narrative with honesty and transparency. By addressing the situation head-on, you calm public fears and show that your company is responsible. A great example of crisis management.", scoreChange: +25 },
                        { text: "Ignore the social media post, believing it will eventually blow over.", outcome: "Your silence is perceived as guilt. The story snowballs, and a local news station picks it up. Your lack of communication makes you look like you have something to hide. A passive and dangerous response.", scoreChange: -30 },
                        { text: "Threaten the person who posted the image with a lawsuit for defamation.", outcome: "You react with hostility and aggression. This action backfires, making the company look like a bully and causing the story to go even more viral. A catastrophic and unprofessional response.", scoreChange: -40 },
                        { text: "Create a misleading press release that downplays the severity of the spill.", outcome: "When the truth comes out, the public will feel deceived. Your company loses all trust and faces even greater public backlash. An unethical and self-destructive choice.", scoreChange: -20 }
                    ]
                },
                {
                    title: "Project Management and Budget Overruns",
                    situation: "Your new drilling project is 20% over budget due to unexpected technical challenges. Your management team is demanding that you find a way to cut costs and get the project back on track, but you know that sacrificing key safety measures is the only way to meet their demands.",
                    options: [
                        { text: "Hold firm on the budget, explaining that safety is non-negotiable and requires a new, realistic budget.", outcome: "You prioritize the safety of your team and the integrity of the project. By refusing to compromise on safety, you protect your workers and prevent a potential disaster, while educating management on the reality of the situation. A principled and correct approach.", scoreChange: +35 },
                        { text: "Cut costs by reducing safety measures and using lower-quality materials.", outcome: "You put the project and your team at risk for the sake of a budget. The use of low-quality materials leads to equipment failure and a serious safety incident. A catastrophic and unethical decision.", scoreChange: -50 },
                        { text: "Try to find hidden funds in other departments to cover the overruns.", outcome: "You create a budgetary mess and damage your reputation with other departments. Your actions are discovered, and you are disciplined for your irresponsibility. A dishonest and reckless solution.", scoreChange: -25 },
                        { text: "Tell your team to work faster to meet the deadline, creating an unsafe and stressful environment.", outcome: "The pressure leads to human error, which results in a near-miss incident and a safety investigation. A poor and ineffective management style.", scoreChange: -15 }
                    ]
                },
                {
                    title: "The Geopolitical Risk",
                    situation: "Your company has a major exploration project in a politically unstable country. A recent coup d'Ã©tat has raised concerns about the safety of your workers and the security of your assets. Your investors want you to continue, as the potential returns are immense.",
                    options: [
                        { text: "Recommend a temporary halt to operations and the evacuation of non-essential personnel until the political situation stabilizes.", outcome: "You prioritize the safety of your employees above all else. By taking decisive action, you protect your team and prevent a potentially dangerous hostage situation or attack. A responsible and humane choice.", scoreChange: +30 },
                        { text: "Continue operations as normal, assuming the situation will not affect your team.", outcome: "Your team is caught in the middle of a conflict, leading to multiple casualties and the loss of your assets. The company faces immense public backlash and financial losses. A catastrophic and irresponsible decision.", scoreChange: -50 },
                        { text: "Hire a private military force to protect your assets and workers.", outcome: "This escalates the situation and makes your company a target. You are seen as a foreign aggressor, and your assets are more likely to be attacked. A dangerous and counterproductive response.", scoreChange: -40 },
                        { text: "Ask your employees if they feel safe, and continue based on their response.", outcome: "You shift the responsibility to your employees, putting them in a difficult position. The decision should be made by a professional, not based on the emotional state of a concerned worker. A passive and irresponsible decision.", scoreChange: -15 }
                    ]
                },
                {
                    title: "Technological Adoption",
                    situation: "Your team has an opportunity to invest in a new, unproven carbon capture technology that could significantly reduce the carbon footprint of your operations. The technology is expensive, but it aligns with your company's long-term sustainability goals. Your finance team is skeptical about the return on investment.",
                    options: [
                        { text: "Propose a pilot project to test the technology on a small scale, gathering data to prove its effectiveness and long-term financial benefits.", outcome: "You take a data-driven and strategic approach. By proving the technology's worth on a small scale, you reduce risk and build a strong case for a larger investment. A prudent and innovative choice.", scoreChange: +25 },
                        { text: "Push for a full-scale investment, believing in the technology's potential without further proof.", outcome: "The technology fails to deliver on its promises, leading to a massive financial loss and a setback for your company's sustainability goals. A reckless and impulsive decision.", scoreChange: -30 },
                        { text: "Ignore the technology and continue with your current operations.", outcome: "You miss a major opportunity to lead in the energy transition. Your competitors invest in the technology and gain a competitive advantage, leaving your company behind. A shortsighted and timid decision.", scoreChange: -20 },
                        { text: "Sell the technology to a competitor and take a small commission.", outcome: "You betray your company's long-term goals for a small financial gain. This is unethical and shows a lack of loyalty. A dishonest and self-serving choice.", scoreChange: -15 }
                    ]
                },
                {
                    title: "Workforce Restructuring and Layoffs",
                    situation: "Due to declining oil prices, your company is forced to downsize. You have been tasked with identifying which team members to lay off. You know that two senior employees, who are well-liked but have outdated skills, are on the list. You can either follow the list or make a difficult decision to save them and lay off two younger, more skilled employees instead.",
                    options: [
                        { text: "Adhere to the list, prioritizing the skills and efficiency that the company needs to survive.", outcome: "You make a difficult but necessary decision based on the company's long-term survival. While it is emotionally painful, it is the correct choice from a business perspective. A logical and professional decision.", scoreChange: +20 },
                        { text: "Save the senior employees and lay off two younger employees to maintain team morale.", outcome: "You make a decision based on emotion, not business sense. You sacrifice the future of the company by letting go of the talent it needs to innovate. A sentimental and poor business decision.", scoreChange: -30 },
                        { text: "Attempt to renegotiate the terms of the layoffs, refusing to let anyone go.", outcome: "You show a lack of understanding of the severity of the situation. Your management will see you as a poor leader who cannot make difficult decisions. An ineffective and naive response.", scoreChange: -10 },
                        { text: "Falsify the performance reviews of the senior employees to justify keeping them.", outcome: "You engage in a dishonest act. When your actions are discovered, you will be fired and your reputation will be ruined. An unethical and dangerous choice.", scoreChange: -40 }
                    ]
                }
            ];

            let score = 100;
            let currentSituationIndex = 0;
            let currentOptions = []; // Stores the shuffled options for the current question

            const scoreElement = document.getElementById('score');
            const situationNumberElement = document.getElementById('situation-number');
            const situationTextElement = document.getElementById('situation-text');
            const optionButtons = document.querySelectorAll('.option-btn');
            const outcomeContainer = document.getElementById('outcome-container');
            const outcomeTextElement = document.getElementById('outcome-text');
            const nextSituationBtn = document.getElementById('next-situation-btn');
            const scoreChangeIndicator = document.getElementById('score-change-indicator');
            const shareBtn = document.getElementById('share-btn');
            const gameContainer = document.getElementById('game-container');
            const sharedScoreContainer = document.getElementById('shared-score-container');
            const sharedScoreElement = document.getElementById('shared-score');
            const playNowBtn = document.getElementById('play-now-btn');
            const messageModal = document.getElementById('message-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');

            // Function to update the score display with a transition
            function updateScoreDisplay(newScore, change) {
                const isPositive = change > 0;
                scoreElement.textContent = newScore;
                scoreChangeIndicator.textContent = `${isPositive ? '+' : ''}${change}`;
                scoreChangeIndicator.classList.remove('text-green-600', 'text-red-600', 'opacity-0');
                scoreChangeIndicator.classList.add(isPositive ? 'text-green-600' : 'text-red-600', 'fade-in');
                setTimeout(() => {
                    scoreChangeIndicator.classList.add('opacity-0');
                }, 1000);
            }

            // Function to load the current situation (UPDATED for randomization)
            function loadSituation() {
                if (currentSituationIndex >= situations.length) {
                    showFinalScore();
                    return;
                }
                const situation = situations[currentSituationIndex];
                
                // --- Shuffle the options for randomization ---
                currentOptions = shuffleArray([...situation.options]);
                // ---------------------------------------------
                
                // Hide outcome and button
                outcomeContainer.classList.add('hidden');
                nextSituationBtn.classList.add('hidden');
                
                // Reset buttons and their listeners
                optionButtons.forEach(btn => {
                    btn.disabled = false;
                    btn.classList.remove('bg-gray-400', 'cursor-not-allowed', 'opacity-50');
                    btn.classList.add('transition-colors', 'transform', 'hover:scale-105', 'duration-200');
                    // Ensure the inline style for course color is reset
                    btn.style.backgroundColor = 'var(--course-primary-color)'; 
                });
                
                // Set situation number and text
                situationNumberElement.textContent = currentSituationIndex + 1;
                situationTextElement.classList.remove('fade-in');
                void situationTextElement.offsetWidth; // Trigger reflow to restart animation
                situationTextElement.textContent = situation.situation;
                situationTextElement.classList.add('fade-in');

                // Set option button texts using the SHUFFLED array
                currentOptions.forEach((option, index) => {
                    optionButtons[index].textContent = option.text;
                });
            }

            // Function to handle option clicks (UPDATED for randomization)
            function handleOptionClick(event) {
                // Disable all option buttons after a choice is made
                optionButtons.forEach(btn => {
                    btn.disabled = true;
                    btn.classList.remove('transition-colors', 'transform', 'hover:scale-105', 'duration-200');
                    btn.classList.add('bg-gray-400', 'cursor-not-allowed', 'opacity-50');
                    // Remove inline style on disabled buttons for neutral gray look
                    btn.style.backgroundColor = ''; 
                });
                
                const optionIndex = parseInt(event.target.dataset.optionIndex, 10);
                
                // --- Use the SHUFFLED options array to get the result ---
                const chosenOption = currentOptions[optionIndex];
                // --------------------------------------------------------
                
                // Update score and display change
                score += chosenOption.scoreChange;
                updateScoreDisplay(score, chosenOption.scoreChange);

                // Display outcome
                outcomeTextElement.textContent = chosenOption.outcome;
                outcomeContainer.classList.remove('hidden');
                nextSituationBtn.classList.remove('hidden');
            }

            // --- UPDATED FINAL SCORE FUNCTION ---
            function showFinalScore() {
                // Save the final score and the profession to local storage
                localStorage.setItem('finalScore', score);
                localStorage.setItem('profession', 'Oil & Gas Professional Simulator');
                
                // Redirect the user to the static results page
                window.location.href = `/leaderlab-results/?score=${score}`;
            }
            // ----------------------------------------------
            
            // Function to show the share modal
            function showShareModal() {
                messageModal.classList.remove('hidden');
            }

            // Function to handle the fallback for copying to clipboard
            function fallbackCopyTextToClipboard(text) {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.top = "0";
                textArea.style.left = "0";
                textArea.style.opacity = "0";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                }
                document.body.removeChild(textArea);
            }

            // Share button event listener
            shareBtn.addEventListener('click', () => {
                const link = window.location.href;
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(link).then(() => {
                        showShareModal();
                    }, (err) => {
                        fallbackCopyTextToClipboard(link);
                        showShareModal();
                    });
                } else {
                    fallbackCopyTextToClipboard(link);
                    showShareModal();
                }
            });

            // Close modal button event listener
            closeModalBtn.addEventListener('click', () => {
                messageModal.classList.add('hidden');
            });

            // --- URL Parameter Handling for Shared View ---
            const urlParams = new URLSearchParams(window.location.search);
            const sharedScore = urlParams.get('score');

            if (sharedScore) {
                gameContainer.classList.add('hidden');
                sharedScoreContainer.classList.remove('hidden');
                sharedScoreElement.textContent = sharedScore;
                shareBtn.classList.add('hidden');
            } else {
                gameContainer.classList.remove('hidden');
                sharedScoreContainer.classList.add('hidden');
                shareBtn.classList.remove('hidden');
            }

            // Play Now button action (for the shared view)
            playNowBtn.addEventListener('click', () => {
                window.location.href = window.location.pathname; // Reload the page without the score parameter
            });
            // ----------------------------------------------

            // Attach event listeners for the game
            optionButtons.forEach(btn => {
                btn.addEventListener('click', handleOptionClick);
            });

            nextSituationBtn.addEventListener('click', () => {
                currentSituationIndex++;
                loadSituation();
            });

            // Initial load only if not in shared view
            if (!sharedScore) {
                loadSituation();
            }
        });
    </script>
</div>